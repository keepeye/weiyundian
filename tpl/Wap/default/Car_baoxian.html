<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>汽车保险</title>
<link rel="stylesheet" type="text/css" href="{pigcms::RES}/car/reserve.css">
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="{pigcms::RES}/car/reserve.js"></script>
<style type="text/css">
.phonelist{margin:0 10px;}
.phonelist a{display:block;background-color:#fff;margin:10px 0;border:1px #ededed solid;border-bottom:3px #ddd solid;}
.phonelist img{margin-right:10px;vertical-align:middle;}
/*switch title bar*/
header{
	background-color: #BB3737;}


</style>


<style>.gmu-media-detect{-webkit-transition: width 0.001ms; width: 0; position: relative; bottom: -999999px;}
@media screen and (width: 1920px) { #gmu-media-detect0 { width: 100px; } }
</style></head>
<body>
<header>
	<a class="btn_home" href="{pigcms::U('index',array('token'=>$token,'wecha_id'=>$wecha_id,'wxref'=>'mp.weixin.qq.com'))}"> </a>
	<h1>续保</h1>
</header>

<div class="viewport">
	<div class="formbox_wrap" id="formbox_wrap">
		<form id="submitForm">
			<input type="hidden" name="token" value="{pigcms:$token}" />
			<input type="hidden" name="wecha_id" value="{pigcms:$wecha_id}" />
			<div class="formbox" id="form_content">
				<div class="input"><input placeholder="车牌" type="text" name="chepai" data-msg="车牌不能为空" data-required="true" /></div>
				<div class="input"><input placeholder="联系人" type="text" name="contact_name" data-msg="联系人不能为空" data-required="true" /></div>
				<div class="input"><input placeholder="联系电话" type="text" name="contact_phone" data-msg="联系电话不能为空" data-required="true" /></div>
				<h3 class="title">投保险种</h3>
				<ul class="checkbox_group">
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="交强险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;交强险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="第三者责任险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;第三者责任险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="车上人员责任险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;车上人员责任险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="车损险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;车损险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="盗抢险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;盗抢险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="自燃险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;自燃险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="涉水险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;涉水险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="玻璃单独破碎险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;玻璃单独破碎险
									</div>
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="checkbox" class="checkbox" pervalue="不计免赔特约险">
							<label>
								<div class="label check_hbox">
									<div class="name">
										&nbsp;&nbsp;不计免赔特约险
									</div>
								</div>
							</label>
						</div>
					</li>
					<input data-type="checkbox" type="hidden" name="xianzhong">
				</ul>
				<h3>第三者保额</h3>
				<ul class="radio_group">
					<li>
						<div data-type="radio" class="radio" pervalue="2000">
							<label>
								<div class="label">
									2000
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="1万">
							<label>
								<div class="label">
									1万
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="2万">
							<label>
								<div class="label">
									2万
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="5万">
							<label>
								<div class="label">
									5万
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="10万">
							<label>
								<div class="label">
									10万
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="20万">
							<label>
								<div class="label">
									20万
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="30万">
							<label>
								<div class="label">
									30万
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="50万">
							<label>
								<div class="label">
									50万
								</div>
							</label>
						</div>
					</li>
					<li>
						<div data-type="radio" class="radio" pervalue="100万">
							<label>
								<div class="label">
									100万
								</div>
							</label>
						</div>
					</li>
					<input data-type="radio" type="hidden" name="money">
				</ul>
				
			</div>
			<a id="btnSubmit" href="javascript:void(0);" class="button active_button" style="color:#fff;">立即提交</a>

		</form>
	</div>
</div>
<script>
$(function(){
	//select
	$('div[data-type="select"]').each(function(idx, obj) {
		$(obj).find('select').on('change', function() {
			$(obj).find('.option').html($(this).val());
		});
	});
	$('input[date-role="datetime"]').each(function(idx, obj) {
		var now = new Date();
		$(obj).on('click', function() {
			$(this).trigger('focus');
			$(this).mobiscroll().datetime({
				theme : 'ios',
				lang : 'zh',
				dateFormat : 'yy-mm-dd',
				dateOrder : 'yymmdd',
				timeFormat : 'hh:ii',
				display : 'bottom',
				timeWheels : 'hhii',
				mode : 'scroller'
			});
			$(this).mobiscroll('show');
			return false;
		});
	});
	//checkbox
	$('div[data-type="checkbox"]').click(function() {
		$(this).toggleClass('selected');
		//计算值
		var input = $(this).parent().parent().find('input')[0];
		var values = [];
		$(this).parent().parent().find('div[data-type="checkbox"]').each(function(idx, obj) {
			if ($(this).hasClass('selected')) {
				values.push($(this).attr('pervalue'));
			}
		});
		$(input).val(values.join(','));
		return false;
	});
	//radio
	$('div[data-type="radio"]').click(function() {
		$(this).parent().parent().find('div[data-type="radio"]').removeClass('selected');
		$(this).toggleClass('selected');
		var input = $(this).parent().parent().find('input')[0];
		var values = '';
		$(this).parent().parent().find('div[data-type="radio"]').each(function(idx, obj) {
			if ($(this).hasClass('selected')) {
				values = $(this).attr('pervalue');
			}
		});
		$(input).val(values);
		return false;
	});
	//提交事件
	$("#btnSubmit").click(function(){
		var form = $("#submitForm");
		var checked = true;
		//检查必填项
		form.find("[data-required='true']").each(function(i){
			if(!$(this).val()){
				alert($(this).attr('data-msg'));
				$(this).focus();
				checked = false;
				return false;
			}
		})
		if(!checked) return;
		var postdata = form.serialize();
		$.ajax({
			url:"{pigcms::U('baoxian')}",
			data:postdata,
			type:"post",
			dataType:"json",
			error:function(){alert('提交失败请重试')},
			success:function(data){
				if(typeof(data) != 'string'){
					$("#formbox_wrap").html(data.info);
				}else{
					$("#formbox_wrap").html(data);
				}
			}
		})
	})
})
</script>

</body>
</html>
